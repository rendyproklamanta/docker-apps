# Connection settings
listen_addresses = '*'
port = 5432

# General settings
max_connections = 1000 # Maximum number of connections
shared_buffers = 1GB # Shared memory for caching data
effective_cache_size = 3GB # Estimate of available memory for caching

# Performance
effective_io_concurrency = 500 # Number of simultaneous I/O operations
random_page_cost = 1.1 # Planner's estimate of the cost of a non-sequentially fetched disk page
work_mem = 16MB # Amount of memory to use for sorts and hash tables
maintenance_work_mem = 256MB # Amount of memory to use for maintenance operations

# WAL Settings
wal_level = replica
archive_mode = on
archive_command = 'cp %p /var/lib/postgresql/data/archive/%f'
max_wal_senders = 3
max_replication_slots = 3

# Autovacuum Settings
autovacuum = on
autovacuum_naptime = 1min
autovacuum_vacuum_scale_factor = 0.2
autovacuum_vacuum_cost_delay = 20ms

# Logging
logging_collector = on
log_directory = 'pg_log'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
log_rotation_age = 1d
log_rotation_size = 0
log_min_duration_statement = 500ms
